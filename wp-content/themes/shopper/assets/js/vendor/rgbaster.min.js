!function(a,b){"use strict";var c=function(a,b){var c=document.createElement("canvas");return c.setAttribute("width",a),c.setAttribute("height",b),c.getContext("2d")},d=function(a,b){var d=new Image,e=a.src||a;"data:"!==e.substring(0,5)&&(d.crossOrigin="Anonymous"),d.onload=function(){var a=c(d.width,d.height);a.drawImage(d,0,0);var e=a.getImageData(0,0,d.width,d.height);b&&b(e.data)},d.src=e},e=function(a){return["rgb(",a,")"].join("")},f=function(a){var b=[];for(var c in a)b.push(h(c,a[c]));return b.sort(function(a,b){return b.count-a.count}),b},g=function(a,b){if(a.length>b)return a.slice(0,b);for(var c=a.length-1;c<b-1;c++)a.push(h("0,0,0",0));return a},h=function(a,b){return{name:e(a),count:b}},i={};i.colors=function(a,c){c=c||{};var h=c.exclude||[],i=c.paletteSize||10;d(a,function(a){for(var d={},j="",k=[],l=0;l<a.length;l+=4)k[0]=a[l],k[1]=a[l+1],k[2]=a[l+2],j=k.join(","),-1===k.indexOf(b)&&0!==a[l+3]&&-1===h.indexOf(e(j))&&(d[j]=j in d?d[j]+1:1);if(c.success){var m=g(f(d),i+1);c.success({dominant:m[0].name,secondary:m[1].name,palette:m.map(function(a){return a.name}).slice(1)})}})},a.RGBaster=a.RGBaster||i}(window);